<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCUE EE 2026 AI Explorer v4.3 (Fixed)</title>
    
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- è¼‰å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- è¼‰å…¥ Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- å­—é«” -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* è‡ªå®šç¾©æ²è»¸ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- Icons ---
        const Icons = {
            Brain: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-1.4 4.5 4.5 0 0 1-3 1.4"/><path d="M5.5 13a4.5 4.5 0 0 1 3-1.4 4.5 4.5 0 0 1 3 1.4"/><path d="M15.5 13a4.5 4.5 0 0 0 3-1.4 4.5 4.5 0 0 0 3 1.4"/><path d="M12 18h.01"/></svg>,
            Cpu: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" /><rect x="9" y="9" width="6" height="6" /><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>,
            Zap: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></svg>,
            Function: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="9" x2="15" y1="15" y2="9"/><line x1="15" x2="9" y1="15" y2="9"/></svg>,
            Sigma: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 7H9l3 5-3 5h9"/><path d="M4 7h3"/><path d="M4 17h3"/></svg>,
            BarChart: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg>,
            CheckCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            Layers: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>,
            Code: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>,
            Mic: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>,
            MessageSquare: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
            ImageIcon: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>,
            ChevronRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6" /></svg>,
            AlertCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>,
            RotateCcw: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>,
            Github: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>,
            Heart: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>,
            Battery: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="10" x="2" y="7" rx="2" ry="2"/><line x1="22" x2="22" y1="11" y2="13"/></svg>,
            Sun: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>,
            Settings: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        };

        // --- VS Code Style Syntax Highlighter ---
        const VSCodeHighlight = ({ code }) => {
            const tokens = code.split(/(\s+|#.*|"[^"]*"|'[^']*'|\b(?:def|class|import|from|return|if|else|elif|for|while|try|except|print|True|False|None)\b|\b\d+\b|[()\[\]{},.])/g);
            return (
                <pre className="font-mono text-xs md:text-sm leading-relaxed overflow-x-auto whitespace-pre">
                    {tokens.map((token, i) => {
                        if (!token) return null;
                        let colorClass = "text-[#d4d4d4]";
                        if (token.startsWith("#")) colorClass = "text-[#6a9955]";
                        else if (token.startsWith('"') || token.startsWith("'")) colorClass = "text-[#ce9178]";
                        else if (/^\d+$/.test(token)) colorClass = "text-[#b5cea8]";
                        else if (["def", "class", "import", "from", "return", "if", "else", "elif", "for", "while", "try", "except"].includes(token)) colorClass = "text-[#c586c0]";
                        else if (["print", "True", "False", "None"].includes(token)) colorClass = "text-[#569cd6]";
                        else if (["(", ")", "[", "]", "{", "}"].includes(token)) colorClass = "text-[#ffd700]";
                        return <span key={i} className={colorClass}>{token}</span>;
                    })}
                </pre>
            );
        };

        const CodeBlock = ({ code, language = 'python', filename = 'main.py' }) => {
            const [copied, setCopied] = useState(false);

            const handleCopy = () => {
                const textArea = document.createElement("textarea");
                textArea.value = code;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setCopied(true);
                } catch (err) {
                    console.error('Failed to copy', err);
                }
                document.body.removeChild(textArea);
                setTimeout(() => setCopied(false), 2000);
            };

            return (
                <div className="bg-[#1e1e1e] rounded-lg overflow-hidden border border-[#333] shadow-lg my-4 group">
                    <div className="flex justify-between items-center px-4 py-2 bg-[#252526] border-b border-[#333]">
                        <span className="text-xs text-[#cccccc] font-sans flex items-center gap-2"><Icons.Code /> {filename}</span>
                        <div className="flex items-center gap-3">
                            <button 
                                onClick={handleCopy}
                                className={`text-[10px] flex items-center gap-1 transition-all ${copied ? 'text-green-400' : 'text-slate-400 opacity-0 group-hover:opacity-100 hover:text-white'}`}
                            >
                                {copied ? <Icons.CheckCircle className="w-3 h-3"/> : <span className="text-xs">ğŸ“‹</span>}
                                {copied ? 'Copied!' : 'Copy'}
                            </button>
                            <div className="flex space-x-1.5">
                                <div className="w-2.5 h-2.5 rounded-full bg-[#ff5f56]"></div>
                                <div className="w-2.5 h-2.5 rounded-full bg-[#ffbd2e]"></div>
                                <div className="w-2.5 h-2.5 rounded-full bg-[#27c93f]"></div>
                            </div>
                        </div>
                    </div>
                    <div className="p-4"><VSCodeHighlight code={code} /></div>
                </div>
            );
        };

        // --- Visualizations ---

        const VisualMultiPerceptron = () => {
            const [inputs, setInputs] = useState([0.8, -0.5, 0.2]); // Continuous inputs
            const [w1, setW1] = useState([0.5, -0.2, 0.8]); // Weights for Neuron 1
            const [w2, setW2] = useState([0.5, 0.5, -0.5]); // Weights for Neuron 2
            const [b1, setB1] = useState(0); // Bias 1
            const [b2, setB2] = useState(0); // Bias 2
            const [selectedNeuron, setSelectedNeuron] = useState(0); // 0 or 1

            const currentWeights = selectedNeuron === 0 ? w1 : w2;
            const currentBias = selectedNeuron === 0 ? b1 : b2;
            const setWeights = selectedNeuron === 0 ? setW1 : setW2;
            const setBias = selectedNeuron === 0 ? setB1 : setB2;
            
            const handleInputChange = (idx, val) => {
                const newInputs = [...inputs];
                newInputs[idx] = parseFloat(val);
                setInputs(newInputs);
            };

            const handleWeightChange = (idx, val) => {
                const newWeights = [...currentWeights];
                newWeights[idx] = parseFloat(val);
                setWeights(newWeights);
            }

            // Calculation
            const z1 = (inputs[0]*w1[0] + inputs[1]*w1[1] + inputs[2]*w1[2] + b1);
            const z2 = (inputs[0]*w2[0] + inputs[1]*w2[1] + inputs[2]*w2[2] + b2);
            const activeZ = selectedNeuron === 0 ? z1 : z2;

            // Activation (ReLU)
            const relu = (z) => Math.max(0, z);
            const a1 = relu(z1).toFixed(2);
            const a2 = relu(z2).toFixed(2);

            // Coordinates for visualization
            const svgH = 320;
            const svgW = 600;
            const inputPos = [{x: 50, y: 60}, {x: 50, y: 160}, {x: 50, y: 260}];
            const outputPos = [{x: 550, y: 110}, {x: 550, y: 210}];
            
            // Middle point for activation function (shifted right)
            const midX = 350;
            const activeOutputY = outputPos[selectedNeuron].y;

            return (
                <div className="bg-slate-900 rounded-lg p-6 border border-slate-700 shadow-xl select-none">
                    {/* Controls Header */}
                    <div className="flex justify-center mb-4 gap-4">
                        <button 
                            onClick={() => setSelectedNeuron(0)}
                            className={`px-6 py-2 rounded-full text-sm font-bold transition-all border ${selectedNeuron===0 ? 'bg-blue-600 border-blue-400 text-white shadow-[0_0_15px_rgba(37,99,235,0.5)]' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}
                        >
                            ç·¨è¼¯ç¥ç¶“å…ƒ 1 (Blue)
                        </button>
                        <button 
                            onClick={() => setSelectedNeuron(1)}
                            className={`px-6 py-2 rounded-full text-sm font-bold transition-all border ${selectedNeuron===1 ? 'bg-purple-600 border-purple-400 text-white shadow-[0_0_15px_rgba(168,85,247,0.5)]' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}
                        >
                            ç·¨è¼¯ç¥ç¶“å…ƒ 2 (Purple)
                        </button>
                    </div>

                    <div className="relative w-full" style={{height: `${svgH}px`}}>
                        
                        {/* SVG Layer for Connections */}
                        <svg className="absolute inset-0 w-full h-full pointer-events-none" viewBox={`0 0 ${svgW} ${svgH}`} preserveAspectRatio="none">
                            {/* Faint lines for non-selected neuron */}
                            {inputPos.map((pos, i) => (
                                <path 
                                    key={`ghost-${i}`}
                                    d={`M ${pos.x+20} ${pos.y} C ${midX-100} ${pos.y}, ${midX-100} ${outputPos[1-selectedNeuron].y}, ${outputPos[1-selectedNeuron].x-30} ${outputPos[1-selectedNeuron].y}`}
                                    stroke="#475569" strokeWidth="1" strokeDasharray="4 4" fill="none" opacity="0.3"
                                />
                            ))}

                            {/* Active lines for selected neuron */}
                            {inputPos.map((pos, i) => (
                                <path 
                                    key={`active-${i}`}
                                    d={`M ${pos.x+20} ${pos.y} C ${midX-50} ${pos.y}, ${midX-150} ${activeOutputY}, ${midX-40} ${activeOutputY}`}
                                    stroke={selectedNeuron===0 ? "#3b82f6" : "#a855f7"} 
                                    strokeWidth={Math.max(1, Math.abs(currentWeights[i])*5)} 
                                    strokeOpacity="0.6" fill="none" 
                                />
                            ))}

                            {/* Line from Activation to Output */}
                            <line 
                                x1={midX+40} y1={activeOutputY} 
                                x2={outputPos[selectedNeuron].x-30} y2={activeOutputY}
                                stroke={selectedNeuron===0 ? "#3b82f6" : "#a855f7"} 
                                strokeWidth="4"
                            />

                            {/* Activation Function Box */}
                            <g transform={`translate(${midX-40}, ${activeOutputY-40})`}>
                                <rect x="0" y="0" width="80" height="80" rx="8" fill="#0f172a" stroke={selectedNeuron===0 ? "#3b82f6" : "#a855f7"} strokeWidth="2" />
                                {/* Grid */}
                                <line x1="10" y1="70" x2="70" y2="70" stroke="#334155" strokeWidth="1" />
                                <line x1="40" y1="10" x2="40" y2="75" stroke="#334155" strokeWidth="1" />
                                {/* ReLU Curve */}
                                <polyline points="10,70 40,70 70,10" fill="none" stroke="white" strokeWidth="2" strokeLinecap="round" />
                                {/* Dot */}
                                <circle 
                                    cx={activeZ < 0 ? 25 : 40 + (Math.min(activeZ, 2)*15)} 
                                    cy={activeZ < 0 ? 70 : 70 - (Math.min(activeZ, 2)*30)} 
                                    r="5" fill={activeZ > 0 ? "#4ade80" : "#ef4444"} stroke="white" strokeWidth="2"
                                    className="transition-all duration-200"
                                />
                                <text x="40" y="-10" textAnchor="middle" className="text-[10px] fill-slate-400 font-mono">ReLU(Î£)</text>
                                <text x="40" y="95" textAnchor="middle" className={`text-[12px] font-bold ${activeZ > 0 ? 'fill-green-400' : 'fill-red-400'}`}>z={activeZ.toFixed(1)}</text>
                            </g>
                        </svg>

                        {/* DOM Elements Layer (Interactive) */}
                        
                        {/* Inputs (Left) */}
                        {inputPos.map((pos, i) => (
                            <div key={i} className="absolute flex flex-col items-center gap-1" style={{left: '2%', top: `${(pos.y/svgH)*100}%`, transform: 'translateY(-50%)'}}>
                                <span className="text-[10px] text-slate-400 font-bold mb-1">x{i+1}</span>
                                <input 
                                    type="range" min="-1" max="1" step="0.1" 
                                    value={inputs[i]} 
                                    onChange={(e) => handleInputChange(i, e.target.value)}
                                    className="w-16 accent-green-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                />
                                <div className={`w-10 h-10 rounded-full border-2 flex items-center justify-center text-xs font-bold transition-all ${inputs[i] > 0 ? 'bg-green-900/50 border-green-500 text-green-300' : 'bg-red-900/50 border-red-500 text-red-300'}`}>
                                    {inputs[i].toFixed(1)}
                                </div>
                            </div>
                        ))}

                        {/* Weights Sliders (On lines) */}
                        {inputPos.map((pos, i) => (
                            <div key={`w-${i}`} className="absolute z-10" style={{left: '25%', top: `${(pos.y + (activeOutputY - pos.y)*0.3)/svgH * 100}%`, transform: 'translate(-50%, -50%)'}}>
                                <div className={`text-[9px] mb-0.5 font-bold text-center bg-slate-900/80 px-1 rounded ${selectedNeuron===0 ? 'text-blue-300' : 'text-purple-300'}`}>
                                    w{selectedNeuron+1}{i+1}: {currentWeights[i].toFixed(1)}
                                </div>
                                <input 
                                    type="range" min="-1" max="1" step="0.1" 
                                    value={currentWeights[i]} 
                                    onChange={(e) => handleWeightChange(i, e.target.value)}
                                    className={`w-20 h-1.5 bg-slate-600 rounded appearance-none cursor-pointer ${selectedNeuron===0 ? 'accent-blue-500' : 'accent-purple-500'}`}
                                />
                            </div>
                        ))}

                        {/* Bias Control (Near Activation) */}
                        <div className="absolute z-10" style={{left: '58%', top: `${(activeOutputY/svgH)*100}%`, transform: 'translate(-50%, 140%)'}}>
                             <div className={`text-[9px] mb-0.5 font-bold text-center ${selectedNeuron===0 ? 'text-blue-300' : 'text-purple-300'}`}>Bias: {currentBias.toFixed(1)}</div>
                             <input 
                                type="range" min="-1" max="1" step="0.1" 
                                value={currentBias}
                                onChange={(e) => setBias(parseFloat(e.target.value))}
                                className={`w-20 h-1.5 bg-slate-600 rounded appearance-none cursor-pointer ${selectedNeuron===0 ? 'accent-blue-500' : 'accent-purple-500'}`}
                             />
                        </div>

                        {/* Outputs (Right) */}
                        {outputPos.map((pos, i) => (
                            <div key={i} className={`absolute flex flex-col items-center gap-1 transition-all duration-300 ${selectedNeuron===i ? 'scale-110 opacity-100 z-10' : 'scale-90 opacity-50'}`} style={{right: '2%', top: `${(pos.y/svgH)*100}%`, transform: 'translateY(-50%)'}}>
                                <div className={`w-14 h-14 rounded-full border-4 flex flex-col items-center justify-center font-mono text-sm shadow-[0_0_20px_rgba(0,0,0,0.5)] transition-colors duration-300 ${i===0 ? (a1 > 0 ? 'bg-blue-900 border-blue-500 text-white shadow-blue-500/50' : 'bg-slate-800 border-slate-600 text-slate-500') : (a2 > 0 ? 'bg-purple-900 border-purple-500 text-white shadow-purple-500/50' : 'bg-slate-800 border-slate-600 text-slate-500')}`}>
                                    <span className="font-bold">{i===0 ? a1 : a2}</span>
                                </div>
                                <span className={`font-bold text-xs ${i===0 ? 'text-blue-400' : 'text-purple-400'}`}>y{i+1}</span>
                            </div>
                        ))}

                    </div>
                </div>
            );
        };

        const VisualQKV = () => {
            return (
                <div className="bg-slate-100 rounded-lg p-6 border border-slate-200">
                    <h4 className="text-center font-bold text-slate-700 mb-4">Transformer: Self-Attention (Q, K, V)</h4>
                    <div className="flex items-center justify-center gap-4 text-xs font-mono">
                        <div className="flex flex-col items-center gap-2">
                            <div className="bg-slate-800 text-white px-3 py-1 rounded">Input X</div>
                            <div className="h-8 w-0.5 bg-slate-400"></div>
                            <div className="flex gap-2">
                                <div className="flex flex-col items-center"><div className="w-8 h-8 bg-blue-100 border border-blue-400 flex items-center justify-center text-blue-700 font-bold">Q</div><span className="text-[10px] text-slate-500">Query</span></div>
                                <div className="flex flex-col items-center"><div className="w-8 h-8 bg-red-100 border border-red-400 flex items-center justify-center text-red-700 font-bold">K</div><span className="text-[10px] text-slate-500">Key</span></div>
                                <div className="flex flex-col items-center"><div className="w-8 h-8 bg-green-100 border border-green-400 flex items-center justify-center text-green-700 font-bold">V</div><span className="text-[10px] text-slate-500">Value</span></div>
                            </div>
                        </div>
                        <div className="text-xl text-slate-400">â†’</div>
                        <div className="bg-white p-2 border border-slate-300 rounded shadow-sm">
                            <div className="mb-1 text-slate-600 font-bold">Attention Score</div>
                            <div className="flex items-center gap-1"><span className="bg-blue-100 text-blue-700 px-1 rounded">Q</span><span>Ã—</span><span className="bg-red-100 text-red-700 px-1 rounded">Káµ€</span></div>
                        </div>
                        <div className="text-xl text-slate-400">â†’</div>
                        <div className="bg-white p-2 border border-slate-300 rounded shadow-sm">
                            <div className="mb-1 text-slate-600 font-bold">Output</div>
                            <div className="flex items-center gap-1"><span>Score</span><span>Ã—</span><span className="bg-green-100 text-green-700 px-1 rounded">V</span></div>
                        </div>
                    </div>
                    <p className="mt-4 text-xs text-slate-500 text-center max-w-md mx-auto">è¼¸å…¥å‘é‡ X é€éä¸‰å€‹ç·šæ€§è®Šæ›çŸ©é™£åˆ†åˆ¥ç”¢ç”Ÿ Q (æŸ¥è©¢), K (éµå€¼), V (æ•¸å€¼)ã€‚Attention = softmax(QÂ·Káµ€ / âˆšd)Â·V</p>
                </div>
            );
        };

        const VisualMamba = () => {
            const [step, setStep] = useState(0);
            useEffect(() => { const interval = setInterval(() => setStep(s => (s+1)%4), 1000); return () => clearInterval(interval); }, []);
            return (
                <div className="bg-slate-100 rounded-lg p-6 border border-slate-200 mt-6">
                    <h4 className="text-center font-bold text-slate-700 mb-4">Mamba: Selective Scan (Parallel Scan)</h4>
                    <div className="flex justify-center gap-2">
                        {[0, 1, 2, 3].map(i => (
                            <div key={i} className={`w-16 h-20 border-2 rounded flex flex-col items-center justify-center transition-all duration-300 ${i <= step ? 'bg-orange-100 border-orange-400' : 'bg-white border-slate-300'}`}>
                                <span className="text-xs font-bold text-slate-600">t={i}</span>
                                <div className="mt-2 w-2 h-2 rounded-full bg-slate-400"></div>
                                {i <= step && <div className="text-[10px] text-orange-600 font-bold mt-1">Processed</div>}
                            </div>
                        ))}
                    </div>
                    <div className="mt-4 text-center"><div className={`inline-block px-3 py-1 rounded text-xs font-bold text-white transition-colors duration-300 ${step === 3 ? 'bg-green-500' : 'bg-slate-400'}`}>{step === 3 ? "Parallel Scan Complete" : "Scanning..."}</div></div>
                    <p className="mt-4 text-xs text-slate-500 text-center max-w-md mx-auto">Mamba åˆ©ç”¨ "Parallel Scan" ç®—æ³•ï¼Œæ‰“ç ´äº† RNN å¿…é ˆã€Œä¾åºã€è¨ˆç®—çš„é™åˆ¶ï¼Œå¯ä»¥åœ¨ GPU ä¸Šä¸¦è¡Œè™•ç†é•·åºåˆ—ã€‚</p>
                </div>
            );
        };

        const VisualCNN = () => {
            const [pos, setPos] = useState(0);
            useEffect(() => { const interval = setInterval(() => { setPos(p => (p + 1) % 4); }, 1000); return () => clearInterval(interval); }, []);
            const offsets = [{ top: 0, left: 0 }, { top: 0, left: 24 }, { top: 24, left: 0 }, { top: 24, left: 24 }];
            return (
                <div className="h-48 bg-slate-100 rounded-lg flex items-center justify-center relative overflow-hidden border border-slate-200 gap-8">
                    <div className="relative w-24 h-24 bg-white border border-slate-300 grid grid-cols-3 gap-0.5 p-0.5">
                        {Array(9).fill(0).map((_, i) => (<div key={i} className={`bg-slate-200 ${i === 4 ? 'bg-slate-400' : ''}`}></div>))}
                        <div className="absolute w-16 h-16 border-2 border-blue-500 bg-blue-500/20 transition-all duration-500 ease-in-out pointer-events-none" style={{ top: offsets[pos].top, left: offsets[pos].left }}></div>
                    </div>
                    <div className="flex flex-col items-center"><Icons.ChevronRight className="text-slate-400 animate-pulse" /><span className="text-[10px] text-blue-600 font-bold">Conv</span></div>
                    <div className="w-16 h-16 bg-white border border-slate-300 grid grid-cols-2 gap-0.5 p-0.5">
                         {Array(4).fill(0).map((_, i) => (<div key={i} className={`transition-all duration-300 ${i === pos ? 'bg-blue-500 scale-90' : 'bg-slate-100'}`}></div>))}
                    </div>
                </div>
            );
        };

        const VisualAutoencoder = () => {
            const [phase, setPhase] = useState(0); 
            useEffect(() => { const interval = setInterval(() => { setPhase(p => (p + 1) % 3); }, 1500); return () => clearInterval(interval); }, []);
            return (
                <div className="h-48 bg-slate-100 rounded-lg flex items-center justify-center gap-4 border border-slate-200 relative overflow-hidden">
                    <div className={`transition-all duration-1000 flex flex-col items-center justify-center bg-white border border-slate-300 shadow-sm ${phase === 1 ? 'w-4 h-16 opacity-30 scale-50' : 'w-24 h-24 opacity-100'}`}>{phase !== 1 && <span className="text-xs font-bold text-slate-500">Input</span>}<div className="grid grid-cols-4 gap-0.5 mt-1 w-full h-full p-1 opacity-50">{Array(16).fill(0).map((_, i) => <div key={i} className="bg-slate-800 rounded-[1px]"></div>)}</div></div>
                    <div className={`transition-all duration-1000 z-10 bg-purple-500 text-white flex items-center justify-center shadow-lg rounded ${phase === 1 ? 'w-12 h-16 scale-125' : 'w-2 h-8 opacity-50'}`}>{phase === 1 && <span className="text-[10px] font-bold rotate-90 whitespace-nowrap">Latent</span>}</div>
                    <div className={`transition-all duration-1000 flex flex-col items-center justify-center bg-white border border-slate-300 shadow-sm ${phase === 1 ? 'w-4 h-16 opacity-30 scale-50' : 'w-24 h-24 opacity-100'}`}>{phase !== 1 && <span className="text-xs font-bold text-slate-500">Output</span>}<div className="grid grid-cols-4 gap-0.5 mt-1 w-full h-full p-1 opacity-50">{Array(16).fill(0).map((_, i) => <div key={i} className="bg-slate-800 rounded-[1px]"></div>)}</div></div>
                </div>
            );
        };

        const VisualGAN = () => {
            const [step, setStep] = useState(0);
            useEffect(() => { const interval = setInterval(() => { setStep(prev => (prev + 1) % 5); }, 1500); return () => clearInterval(interval); }, []);
            return (
                <div className="h-48 bg-slate-100 rounded-lg flex items-center justify-center relative overflow-hidden border border-slate-200">
                    <div className={`absolute left-4 p-3 rounded-lg border-2 transition-all duration-500 ${step===1 || step===4 ? 'bg-blue-100 border-blue-500 scale-110' : 'bg-white border-slate-300'}`}><div className="text-xs font-bold text-center">Generator</div><div className="text-[10px] text-slate-500 text-center">ç”Ÿæˆå½é€ å“</div></div>
                    <div className={`absolute left-20 top-1/2 -translate-y-1/2 w-16 h-1 bg-slate-300 transition-all ${step===0 ? 'opacity-100' : 'opacity-20'}`}><div className="absolute top-[-15px] text-[10px] text-slate-500">Noise (z)</div></div>
                    <div className={`absolute transition-all duration-1000 ease-in-out flex flex-col items-center justify-center ${step >= 1 ? 'left-1/2 opacity-100' : 'left-20 opacity-0'}`}><div className="w-10 h-10 bg-purple-200 border border-purple-400 flex items-center justify-center text-[8px]">FAKE</div></div>
                    <div className="absolute bottom-4 right-1/3 w-10 h-10 bg-green-200 border border-green-400 flex items-center justify-center text-[8px]">REAL</div>
                    <div className={`absolute right-4 p-3 rounded-lg border-2 transition-all duration-500 ${step===2 || step===3 ? 'bg-red-100 border-red-500 scale-110' : 'bg-white border-slate-300'}`}><div className="text-xs font-bold text-center">Discriminator</div><div className="text-[10px] text-slate-500 text-center">è­¦å¯Ÿ (åˆ†è¾¨çœŸå‡)</div></div>
                    <div className={`absolute top-4 w-full h-full pointer-events-none transition-opacity duration-500 ${step===4 ? 'opacity-100' : 'opacity-0'}`}><svg width="100%" height="100%"><path d="M 250 60 Q 150 10 50 60" fill="none" stroke="#ef4444" strokeWidth="2" strokeDasharray="4" markerEnd="url(#arrow-red)" /></svg><div className="absolute top-2 left-1/2 -translate-x-1/2 text-[10px] bg-white px-1 text-red-500 font-bold">Backprop (Loss)</div></div>
                    <defs><marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#ef4444" /></marker></defs>
                </div>
            );
        };

        const VisualTeacherForcing = () => {
            const [t, setT] = useState(0);
            useEffect(() => { const interval = setInterval(() => { setT(prev => (prev + 1) % 4); }, 1500); return () => clearInterval(interval); }, []);
            return (
                <div className="h-48 bg-slate-100 rounded-lg p-4 flex flex-col justify-center relative border border-slate-200">
                    <div className="text-xs font-bold text-slate-500 mb-2 text-center">Math Task: 12 + 8 = ? (Target: 20)</div>
                    <div className="flex justify-center gap-8">
                        <div className={`flex flex-col items-center transition-opacity ${t>=1 ? 'opacity-100' : 'opacity-30'}`}><div className="bg-white px-2 py-1 border border-slate-300 text-xs mb-1">Input: "12+8="</div><div className="w-0.5 h-4 bg-slate-300"></div><div className="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm z-10">Model</div><div className="w-0.5 h-4 bg-slate-300"></div><div className="bg-red-100 px-2 py-1 border border-red-300 text-xs text-red-600 font-mono mb-1">Pred: 9</div><div className="text-[10px] text-green-600 font-bold">GT: 2</div></div>
                        <div className={`relative w-16 mt-12 transition-opacity ${t>=2 ? 'opacity-100' : 'opacity-0'}`}><svg width="64" height="40" className="overflow-visible"><path d="M 0 10 Q 32 30 64 10" fill="none" stroke="#ef4444" strokeWidth="1" strokeDasharray="2" opacity="0.3"/><path d="M 0 30 Q 32 50 64 10" fill="none" stroke="#22c55e" strokeWidth="2" markerEnd="url(#arrow-green)"/></svg><div className="absolute top-8 left-2 text-[9px] bg-green-100 px-1 text-green-700 font-bold border border-green-300 rounded">Teacher Force</div></div>
                        <div className={`flex flex-col items-center transition-opacity ${t>=3 ? 'opacity-100' : 'opacity-30'}`}><div className="bg-green-50 px-2 py-1 border border-green-300 text-xs mb-1 text-green-700 font-bold">Input: "...2"</div><div className="w-0.5 h-4 bg-slate-300"></div><div className="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm z-10">Model</div><div className="w-0.5 h-4 bg-slate-300"></div><div className="bg-blue-100 px-2 py-1 border border-blue-300 text-xs text-blue-600 font-mono mb-1">Pred: 0</div><div className="text-[10px] text-green-600 font-bold">GT: 0</div></div>
                    </div>
                    <defs><marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#22c55e" /></marker></defs>
                </div>
            );
        };

        const VisualLoRA = () => {
            return (
                <div className="h-48 bg-slate-100 rounded-lg p-4 flex items-center justify-center gap-4 border border-slate-200">
                    <div className="flex flex-col items-center"><div className="w-16 h-24 bg-blue-200 border-2 border-blue-400 relative flex items-center justify-center"><div className="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiM5M2M1ZmQiLz4KPC9zdmc+')] opacity-50"></div><span className="font-bold text-blue-800 text-xl">W</span><div className="absolute -top-2 -right-2 bg-blue-600 text-white text-[9px] px-1 rounded">Frozen</div></div><span className="text-xs mt-2 text-slate-500">Pre-trained</span></div>
                    <div className="text-2xl font-bold text-slate-400">+</div>
                    <div className="flex flex-col items-center"><div className="flex items-center gap-1"><div className="w-6 h-24 bg-orange-200 border-2 border-orange-400 flex items-center justify-center"><span className="font-bold text-orange-800 text-xs">A</span></div><div className="text-xs text-slate-400">Ã—</div><div className="w-16 h-6 bg-orange-200 border-2 border-orange-400 flex items-center justify-center"><span className="font-bold text-orange-800 text-xs">B</span></div></div><div className="text-[10px] mt-2 bg-orange-100 text-orange-700 px-2 py-1 rounded border border-orange-300">Trainable (Rank r=8)</div><div className="text-[9px] text-slate-400 mt-1 max-w-[120px] text-center">æ¨¡æ“¬åªè¨“ç·´ã€Œæœ€å¤–å´çš„ Row & Colã€ä¾†èª¿æ•´æ¬Šé‡</div></div>
                </div>
            );
        };

        const Concepts2 = () => {
             const modules = [
                {
                    id: 'perceptron',
                    title: '1. æ„ŸçŸ¥å™¨ç¶²è·¯ (Perceptron)',
                    tag: 'Fundamental',
                    desc: 'é€™æ˜¯ç¥ç¶“ç¶²è·¯çš„èµ·é»ã€‚æˆ‘å€‘å°‡ä¸‰å€‹è¼¸å…¥ (x1, x2, x3) é€éæ¬Šé‡çŸ©é™£ W è½‰æ›ç‚ºå…©å€‹è¼¸å‡º (y1, y2)ã€‚ä¸­é–“ç¶“é ReLU æ¿€æ´»å‡½æ•¸ï¼Œæ¨¡æ“¬ç¥ç¶“å…ƒçš„è§¸ç™¼æ©Ÿåˆ¶ã€‚',
                    visual: <VisualMultiPerceptron />,
                    params: { inputs: 3, outputs: 2, activation: 'ReLU' },
                    github: 'https://github.com/pytorch/examples/blob/main/mnist/main.py',
                    code: `import torch.nn as nn

# å®šç¾©ä¸€å€‹å–®å±¤å…¨é€£æ¥ç¶²è·¯
# è¼¸å…¥ç¶­åº¦: 3, è¼¸å‡ºç¶­åº¦: 2
model = nn.Sequential(
    nn.Linear(3, 2),
    nn.ReLU() # æ¿€æ´»å‡½æ•¸
)

print(model[0].weight) # æŸ¥çœ‹æ¬Šé‡çŸ©é™£ Shape: [2, 3]
print(model[0].bias)   # æŸ¥çœ‹åå·®å‘é‡ Shape: [2]

# Forward Pass
output = model(input_tensor)`
                },
                {
                    id: 'cv_supervised',
                    title: '2. ç›£ç£å¼å­¸ç¿’ (CNN)',
                    tag: 'Computer Vision',
                    desc: 'å½±åƒåˆ†é¡ (Classification) æ˜¯ AI çš„ Hello Worldã€‚æ¨¡å‹å­¸ç¿’å¾åœ–ç‰‡çŸ©é™£ä¸­æå–ç‰¹å¾µ (Feature) ä¸¦æ˜ å°„åˆ°æ¨™ç±¤ã€‚',
                    visual: <VisualCNN />,
                    params: { optimizer: 'Adam', lr: '0.001', loss: 'CrossEntropy' },
                    github: 'https://github.com/pytorch/examples/tree/main/mnist',
                    code: `import torch.nn as nn

class SimpleCNN(nn.Module):
    def __init__(self):
        super().__init__()
        # å·ç©å±¤æå–ç‰¹å¾µ
        self.conv1 = nn.Conv2d(3, 16, kernel_size=3)
        self.relu = nn.ReLU()
        # å…¨é€£æ¥å±¤é€²è¡Œåˆ†é¡
        self.fc = nn.Linear(16 * 26 * 26, 2) 

    def forward(self, x):
        x = self.conv1(x)
        return self.fc(x)`
                },
                {
                    id: 'cv_unsupervised',
                    title: '3. éç›£ç£å¼å­¸ç¿’ (Autoencoder)',
                    tag: 'Computer Vision',
                    desc: 'æ²’æœ‰æ¨™ç±¤æ€éº¼è¾¦ï¼Ÿè®“æ¨¡å‹å­¸ç¿’ã€Œå£“ç¸®ã€å†ã€Œé‚„åŸã€åœ–ç‰‡ã€‚é€™èƒ½å¼·è¿«æ¨¡å‹å­¸æœƒåœ–ç‰‡çš„ç²¾è¯ç‰¹å¾µ (Latent Representation)ã€‚',
                    visual: <VisualAutoencoder />,
                    params: { latent_dim: '128', loss: 'MSE (Reconstruction)' },
                    github: 'https://github.com/L1aoXingyu/pytorch-beginner/tree/master/08-AutoEncoder',
                    code: `class Autoencoder(nn.Module):
    def __init__(self):
        super().__init__()
        # Encoder: å£“ç¸®
        self.encoder = nn.Linear(28*28, 128)
        # Decoder:é‚„åŸ
        self.decoder = nn.Linear(128, 28*28)

    def forward(self, x):
        encoded = self.encoder(x)
        decoded = self.decoder(encoded)
        return decoded`
                },
                {
                    id: 'cv_gan',
                    title: '4. å°æŠ—å¼ç”Ÿæˆç¶²è·¯ (GAN)',
                    tag: 'Generative AI',
                    desc: 'å…©å€‹æ¨¡å‹åœ¨æ‰“æ¶ï¼šGenerator æ‹¼å‘½é€ å‡ï¼ŒDiscriminator æ‹¼å‘½æŠ“å‡ã€‚æœ€çµ‚ G æœƒå¼·åˆ°é€£ D éƒ½åˆ†ä¸å‡ºä¾†ã€‚',
                    visual: <VisualGAN />,
                    params: { z_dim: '100', g_lr: '0.0002', d_lr: '0.0002' },
                    github: 'https://github.com/eriklindernoren/PyTorch-GAN',
                    code: `# è¨“ç·´åˆ¤åˆ¥å™¨ (Discriminator)
real_loss = criterion(D(real_imgs), valid)
fake_loss = criterion(D(gen_imgs.detach()), fake)
d_loss = (real_loss + fake_loss) / 2
d_loss.backward()

# è¨“ç·´ç”Ÿæˆå™¨ (Generator)
# G å¸Œæœ› D åˆ¤æ–·ç”Ÿæˆçš„åœ–ç‰‡ç‚ºçœŸ (valid)
g_loss = criterion(D(gen_imgs), valid)
g_loss.backward()`
                },
                {
                    id: 'nlp_teacher_forcing',
                    title: '5. è‡ªå›æ­¸èˆ‡ Teacher Forcing',
                    tag: 'NLP / Math',
                    desc: 'è¨“ç·´ LLM åšæ•¸å­¸é‹ç®—æ™‚ï¼Œå¦‚æœä¸Šä¸€æ­¥ç®—éŒ¯äº†ï¼Œæˆ‘å€‘ä»æœƒæŠŠã€Œæ­£ç¢ºç­”æ¡ˆã€é¤µçµ¦å®ƒé€²è¡Œä¸‹ä¸€æ­¥è¨“ç·´ï¼Œé€™å« Teacher Forcingã€‚',
                    visual: <VisualTeacherForcing />,
                    params: { context_length: '512', shift_labels: 'True' },
                    github: 'https://github.com/karpathy/minGPT',
                    code: `# æº–å‚™æ•¸å­¸é¡Œè³‡æ–™
# Input: "12+8=" (ä¸å«æœ€å¾Œç­”æ¡ˆ)
# Target: "2+8=20" (é æ¸¬ä¸‹ä¸€å€‹å­—)

def loss_fn(logits, targets):
    # Shift so that tokens < n predict n
    shift_logits = logits[..., :-1, :].contiguous()
    shift_labels = targets[..., 1:].contiguous()
    
    # è¨ˆç®— CrossEntropy
    loss = nn.CrossEntropyLoss()(shift_logits, shift_labels)
    return loss`
                },
                {
                    id: 'nlp_finetuning',
                    title: '6. å¤§èªè¨€æ¨¡å‹å¾®èª¿ (SFT)',
                    tag: 'LLM',
                    desc: 'é è¨“ç·´æ¨¡å‹ (Pre-trained) æ‡‚å¾ˆå¤šä½†ä¸æœƒèŠå¤©ã€‚æˆ‘å€‘ç”¨é«˜å“è³ªçš„å•ç­”å° (Instruction Dataset) è®“å®ƒå­¸æœƒè½æŒ‡ä»¤ã€‚',
                    visual: <div className="h-48 bg-slate-100 rounded-lg flex items-center justify-center gap-4 border border-slate-200"><div className="w-16 h-20 bg-blue-200 rounded flex items-center justify-center text-xs text-center font-bold">Base<br/>LLM</div><div className="text-xl">+</div><div className="text-xs bg-yellow-100 p-2 border border-yellow-300 rounded">Q:ä½ å¥½<br/>A:ä½ å¥½!</div><Icons.ChevronRight/><div className="w-16 h-20 bg-purple-200 rounded flex items-center justify-center text-xs text-center font-bold">Chat<br/>Bot</div></div>,
                    params: { batch_size: '4', epochs: '3', data: 'Alpaca' },
                    github: 'https://github.com/tatsu-lab/stanford_alpaca',
                    code: `from transformers import Trainer

trainer = Trainer(
    model=model,
    train_dataset=dataset,
    args=TrainingArguments(
        num_train_epochs=3,
        per_device_train_batch_size=4,
        learning_rate=2e-5,
        output_dir="./chat_model"
    )
)
trainer.train()`
                },
                {
                    id: 'nlp_peft',
                    title: '7. åƒæ•¸é«˜æ•ˆå¾®èª¿ (LoRA)',
                    tag: 'Advanced Efficient AI',
                    desc: 'ä¸ç”¨è¨“ç·´æ•´å€‹å¤§æ¨¡å‹ (Freeze W)ï¼æˆ‘å€‘åªåœ¨æ—è·¯æ’å…¥å…©å€‹æ¥µå°çš„çŸ©é™£ A å’Œ Bã€‚é€™å°±åƒåªå¾®èª¿çŸ©é™£çš„ã€Œå¤–å´è¡Œèˆ‡åˆ—ã€ä¾†æ”¹è®Šæ•´é«”è¡Œç‚ºã€‚',
                    visual: <VisualLoRA />,
                    params: { r: '8', lora_alpha: '32', target_modules: 'q,v' },
                    github: 'https://github.com/huggingface/peft',
                    code: `from peft import LoraConfig, get_peft_model

# è¨­å®š LoRA åƒæ•¸
config = LoraConfig(
    r=8,              # Rank (çŸ©é™£å¯¬åº¦ï¼Œè¶Šå°è¶Šå¿«)
    lora_alpha=32,    # ç¸®æ”¾ä¿‚æ•¸
    target_modules=["q_proj", "v_proj"], # åªå¾®èª¿ Attention
    lora_dropout=0.05,
    bias="none"
)

# å°‡ LoRA é©é…å™¨åŠ å…¥æ¨¡å‹ (W è®Šç‚º W + BA)
model = get_peft_model(base_model, config)
model.print_trainable_parameters()`
                }
             ];

            return (
                <div className="py-12 px-4 max-w-6xl mx-auto">
                    <h2 className="text-3xl font-bold text-slate-800 mb-2 flex items-center gap-2">
                        <Icons.Layers className="text-blue-600" /> AI æ ¸å¿ƒè§€å¿µ
                    </h2>
                    <p className="text-slate-600 mb-8">å°ˆæ¡ˆå°å‘å­¸ç¿’ï¼šå¾æ„ŸçŸ¥å™¨ç¶²è·¯åˆ°æœ€å…ˆé€²çš„ LLM å¾®èª¿æŠ€è¡“</p>
                    
                    <div className="grid grid-cols-1 xl:grid-cols-2 gap-8">
                        {modules.map((m) => (
                            <div key={m.id} className="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col">
                                <div className="p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                    <h3 className="font-bold text-lg text-slate-800">{m.title}</h3>
                                    <span className={`text-[10px] px-2 py-1 rounded-full font-bold border ${
                                        m.tag.includes('CV') ? 'bg-blue-100 text-blue-600 border-blue-200' :
                                        m.tag.includes('Gen') ? 'bg-purple-100 text-purple-600 border-purple-200' :
                                        m.tag.includes('Fund') ? 'bg-green-100 text-green-600 border-green-200' :
                                        'bg-orange-100 text-orange-600 border-orange-200'
                                    }`}>
                                        {m.tag}
                                    </span>
                                </div>
                                <div className="p-6 bg-slate-50/50">
                                    {m.visual}
                                </div>
                                <div className="p-6 pt-2 flex-grow flex flex-col">
                                    <p className="text-sm text-slate-600 mb-4 leading-relaxed h-12">{m.desc}</p>
                                    <div className="mb-4 flex flex-wrap gap-2">
                                        {Object.entries(m.params).map(([k, v]) => (
                                            <div key={k} className="text-[10px] bg-slate-100 text-slate-600 px-2 py-1 rounded border border-slate-200 font-mono">
                                                <span className="font-bold text-slate-800">{k}:</span> {v}
                                            </div>
                                        ))}
                                    </div>
                                    <div className="mt-auto">
                                        <CodeBlock code={m.code} />
                                    </div>
                                    <div className="mt-4 pt-4 border-t border-slate-100 flex justify-end">
                                        <a href={m.github} target="_blank" rel="noreferrer" className="flex items-center gap-1 text-xs font-bold text-slate-500 hover:text-black transition-colors">
                                            <Icons.Github /> View on GitHub
                                        </a>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const DataProjects = () => {
            const [activeProject, setActiveProject] = useState('audio');

            const projects = {
                audio: {
                title: 'å°ˆæ¡ˆï¼šèªéŸ³ç”Ÿæˆèˆ‡è­˜åˆ¥',
                Icon: Icons.Mic,
                desc: 'å¾æ³¢å½¢ (Waveform) åˆ°é »è­œåœ– (Spectrogram)ã€‚èªéŸ³ä¿¡è™Ÿæœ¬è³ªä¸Šæ˜¯ä¸€ç¶­çš„æ™‚é–“åºåˆ—ï¼Œä½†åœ¨ AI ä¸­æˆ‘å€‘é€šå¸¸å°‡å…¶è½‰æ›ç‚ºäºŒç¶­åœ–åƒè™•ç†ã€‚',
                pipeline: ['åŸå§‹éŸ³è¨Š (Raw Audio)', 'é åŠ å¼· (Pre-emphasis)', 'çŸ­æ™‚è·å‚…ç«‹è‘‰ (STFT)', 'æ¢…çˆ¾é »è­œ (Mel-Spectrogram)', 'CNN/RNN æ¨¡å‹'],
                code: `# Librosa éŸ³è¨Šè™•ç†ç¯„ä¾‹
import librosa
import numpy as np

# 1. è®€å–éŸ³æª” (Sample Rate = 16kHz)
# y Shape: (N_samples,) - ä¸€ç¶­é™£åˆ—
y, sr = librosa.load('speech.wav', sr=16000)

# 2. çŸ­æ™‚è·å‚…ç«‹è‘‰è½‰æ› (STFT)
# å°‡æ™‚åŸŸä¿¡è™Ÿè½‰ç‚ºé »åŸŸ
D = librosa.stft(y)

# 3. è½‰ç‚ºæ¢…çˆ¾é »è­œ (æ¨¡æ“¬äººè€³è½è¦º)
# S Shape: (n_mels, time_steps) - äºŒç¶­ç‰¹å¾µåœ–
S = librosa.feature.melspectrogram(y=y, sr=sr, n_mels=128)
log_S = librosa.power_to_db(S, ref=np.max)`
                },
                nlp: {
                title: 'å°ˆæ¡ˆï¼šæƒ…æ„Ÿè¾¨è­˜ (NLP)',
                Icon: Icons.MessageSquare,
                desc: 'é›»è…¦çœ‹ä¸æ‡‚ä¸­æ–‡ï¼Œæˆ‘å€‘éœ€è¦å°‡æ–‡å­—ã€Œä»£å¹£åŒ– (Tokenize)ã€ä¸¦è½‰ç‚ºå‘é‡ (Embedding)ã€‚é€™å°±æ˜¯å¤§å‹èªè¨€æ¨¡å‹ (LLM) çš„åŸºç¤ã€‚',
                pipeline: ['æ–‡å­—è¼¸å…¥', 'æ–·è© (Tokenization)', 'å‘é‡åŒ– (Embedding)', 'Transformer Encoder', 'åˆ†é¡è¼¸å‡º'],
                code: `# Transformers NLP è™•ç†ç¯„ä¾‹
from transformers import AutoTokenizer

text = ["é›»æ©Ÿç³»é€™é–€èª²çœŸæœ‰è¶£ï¼"] # Batch size = 1

# 1. åˆå§‹åŒ–æ–·è©å™¨
tokenizer = AutoTokenizer.from_pretrained("bert-base-chinese")

# 2. è½‰ç‚ºæ•¸å­— ID (Token IDs)
# padding=True: è£œé›¶ä½¿é•·åº¦ä¸€è‡´, truncation=True: æˆªæ–·éé•·å¥å­
inputs = tokenizer(text, padding=True, truncation=True, return_tensors="pt")

print(inputs['input_ids'])
# Shape: (Batch_Size, Seq_Len)
# tensor([[101, 7592, 2341, ..., 102]])

# 3. æ¨¡å‹æ¨è«–
# Output Shape: (Batch_Size, Seq_Len, Hidden_Dim)
# e.g., (1, 10, 768)`
                },
                image: {
                title: 'å°ˆæ¡ˆï¼šå½±åƒè¾¨è­˜',
                Icon: Icons.ImageIcon,
                desc: 'å½±åƒåœ¨é›»è…¦çœ¼ä¸­åªæ˜¯ä¸€å€‹å·¨å¤§çš„çŸ©é™£ã€‚æˆ‘å€‘éœ€è¦å°‡åƒç´ å€¼æ¨™æº–åŒ– (Normalization)ï¼Œè®“æ¨¡å‹æ›´å®¹æ˜“æ”¶æ–‚ã€‚',
                pipeline: ['åœ–ç‰‡è¼¸å…¥ (RGB)', 'èª¿æ•´å¤§å° (Resize)', 'è½‰ç‚ºå¼µé‡ (ToTensor)', 'æ¨™æº–åŒ– (Normalize)', 'CNN æ¨¡å‹'],
                code: `# PyTorch å½±åƒé è™•ç†ç¯„ä¾‹
from torchvision import transforms
from PIL import Image

# å®šç¾©å‰è™•ç†æµç¨‹
transform = transforms.Compose([
    # 1. çµ±ä¸€åœ–ç‰‡å¤§å° (H, W)
    transforms.Resize((224, 224)), 
    
    # 2. è½‰ç‚º Tensor (Channel, H, W) ä¸¦æ­¸ä¸€åŒ–è‡³ [0, 1]
    transforms.ToTensor(),         
    
    # 3. æ¨™æº–åŒ–: (x - mean) / std
    # ä½¿ç”¨ ImageNet çš„å¹³å‡å€¼èˆ‡æ¨™æº–å·®
    transforms.Normalize(mean=[0.485, 0.456, 0.406],
                         std=[0.229, 0.224, 0.225])
])

img = Image.open("circuit_board.jpg")
input_tensor = transform(img)
# Final Shape: (3, 224, 224)`
                }
            };

            const current = projects[activeProject];
            const CurrentIcon = current.Icon;

            return (
                <div className="py-12 px-4 max-w-6xl mx-auto">
                    <h2 className="text-3xl font-bold text-slate-800 mb-8 flex items-center gap-2">
                        <Icons.Code className="text-purple-600"/> æ•¸æ“šå‰è™•ç†èˆ‡å°ˆæ¡ˆå¯¦æˆ°
                    </h2>
                    
                    <div className="flex flex-col md:flex-row gap-8">
                        <div className="md:w-1/4 flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible pb-4 md:pb-0">
                        {Object.keys(projects).map((key) => {
                            const ProjectIcon = projects[key].Icon;
                            return (
                                <button
                                key={key}
                                onClick={() => setActiveProject(key)}
                                className={`flex items-center gap-3 p-4 rounded-xl transition-all whitespace-nowrap ${
                                    activeProject === key 
                                    ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30' 
                                    : 'bg-white text-slate-600 hover:bg-slate-50 border border-slate-200'
                                }`}
                                >
                                <ProjectIcon />
                                <span className="font-bold">{key === 'audio' ? 'èªéŸ³ç”Ÿæˆ' : key === 'nlp' ? 'è‡ªç„¶èªè¨€' : 'é›»è…¦è¦–è¦º'}</span>
                                </button>
                            );
                        })}
                        </div>

                        <div className="md:w-3/4 bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                        <div className="p-8 bg-slate-50 border-b border-slate-200">
                            <h3 className="text-2xl font-bold text-slate-800 flex items-center gap-3">
                                <CurrentIcon /> {current.title}
                            </h3>
                            <p className="mt-2 text-slate-600">{current.desc}</p>
                        </div>
                        
                        <div className="p-8 space-y-8">
                            <div>
                            <h4 className="text-sm font-bold text-slate-400 uppercase mb-4 tracking-wider">è™•ç†æµç¨‹ Pipeline</h4>
                            <div className="flex flex-wrap items-center gap-4">
                                {current.pipeline.map((step, i) => (
                                <React.Fragment key={i}>
                                    <div className="px-4 py-2 bg-white border-2 border-blue-100 rounded-lg shadow-sm text-sm font-medium text-slate-700">
                                    {step}
                                    </div>
                                    {i < current.pipeline.length - 1 && (
                                    <span className="text-slate-300"><Icons.ChevronRight /></span>
                                    )}
                                </React.Fragment>
                                ))}
                            </div>
                            </div>

                            <div>
                            <h4 className="text-sm font-bold text-slate-400 uppercase mb-2 tracking-wider">Python å¯¦ä½œä»£ç¢¼</h4>
                            <CodeBlock code={current.code} />
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            );
        };

        const LinearAlgebraModule = () => {
            const [angle, setAngle] = useState(45);
            const rad = angle * (Math.PI / 180);
            const w = { x: 100, y: 0 };
            const xVec = { x: 100 * Math.cos(rad), y: -100 * Math.sin(rad) };
            const dotProduct = Math.cos(rad).toFixed(3);
            
            return (
                <div className="bg-white p-6 rounded-2xl shadow border border-slate-200">
                    <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <Icons.Function className="text-blue-500"/> ç·šæ€§ä»£æ•¸ï¼šé»ç©èˆ‡æŠ•å½±
                    </h3>
                    <div className="flex flex-col md:flex-row gap-8 items-center">
                        <div className="relative w-64 h-64 bg-slate-50 border border-slate-200 rounded-full flex items-center justify-center">
                            <svg width="100%" height="100%" viewBox="-120 -120 240 240" className="overflow-visible">
                                <line x1="-100" y1="0" x2="100" y2="0" stroke="#cbd5e1" strokeWidth="1" />
                                <line x1="0" y1="-100" x2="0" y2="100" stroke="#cbd5e1" strokeWidth="1" />
                                <line x1="0" y1="0" x2={w.x} y2={w.y} stroke="#3b82f6" strokeWidth="4" markerEnd="url(#arrowhead-blue)" />
                                <text x={w.x + 10} y={w.y + 5} className="text-xs fill-blue-600 font-bold">W (æ¬Šé‡)</text>
                                <line x1="0" y1="0" x2={xVec.x} y2={xVec.y} stroke="#ef4444" strokeWidth="4" markerEnd="url(#arrowhead-red)" />
                                <text x={xVec.x + 10} y={xVec.y - 10} className="text-xs fill-red-600 font-bold">X (è¼¸å…¥)</text>
                                <line x1={xVec.x} y1={xVec.y} x2={xVec.x} y2={0} stroke="#94a3b8" strokeDasharray="4" />
                                <defs>
                                    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6" /></marker>
                                    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#ef4444" /></marker>
                                </defs>
                            </svg>
                        </div>
                        <div className="flex-1 space-y-4">
                            <p className="text-slate-600 text-sm">ç¥ç¶“å…ƒè¨ˆç®— y = Wâ‹…X + b å³ç‚º<strong>ã€Œé»ç©ã€</strong>ï¼Œå¹¾ä½•æ„ç¾©ç‚º<strong>ã€ŒæŠ•å½±ã€</strong>ã€‚è¼¸å…¥ X èˆ‡æ¬Šé‡ W è¶Šç›¸ä¼¼ï¼Œè¼¸å‡ºè¶Šå¤§ã€‚</p>
                            <div className="bg-slate-100 p-4 rounded-lg">
                                <label className="text-sm font-bold text-slate-700">èª¿æ•´å¤¾è§’ (Angle)</label>
                                <input type="range" min="0" max="180" value={angle} onChange={(e) => setAngle(parseInt(e.target.value))} className="w-full accent-blue-600 mt-2"/>
                                <div className="flex justify-between mt-2 font-mono"><span>Angle: {angle}Â°</span><span className={dotProduct > 0 ? "text-green-600" : "text-red-600"}>Dot Product: {dotProduct}</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ConvolutionModule = () => {
            const inputGrid = [[0, 0, 0, 10, 10], [0, 0, 0, 10, 10], [0, 0, 0, 10, 10], [0, 0, 0, 10, 10], [0, 0, 0, 10, 10]];
            const kernel = [[-1, 0, 1], [-1, 0, 1], [-1, 0, 1]];
            const [step, setStep] = useState(0);
            const [isAuto, setIsAuto] = useState(false);
            const outputSize = 3;
            const currentRow = Math.floor(step / outputSize);
            const currentCol = step % outputSize;
            let sum = 0;
            let calculationStr = [];
            
            for(let i=0; i<3; i++) {
                for(let j=0; j<3; j++) {
                    const val = inputGrid[currentRow + i][currentCol + j];
                    const kVal = kernel[i][j];
                    sum += val * kVal;
                    if (val !== 0 && kVal !== 0) calculationStr.push(`(${val}Ã—${kVal})`);
                }
            }

            useEffect(() => {
                let interval;
                if (isAuto) {
                    interval = setInterval(() => {
                        setStep((prev) => (prev + 1) % (outputSize * outputSize));
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isAuto]);

            return (
                <div className="bg-white p-6 rounded-2xl shadow border border-slate-200 mt-8">
                    <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"><Icons.Sigma className="text-purple-500"/> ä¿¡è™Ÿèˆ‡ç³»çµ±ï¼šå·ç© (Convolution)</h3>
                    <div className="flex flex-col lg:flex-row items-center justify-center gap-8">
                        <div className="relative">
                            <h4 className="text-center text-sm font-bold mb-2">Input Image</h4>
                            <div className="grid grid-cols-5 gap-1 bg-slate-200 p-1 rounded">
                                {inputGrid.map((row, r) => row.map((val, c) => {
                                    const inWindow = r >= currentRow && r < currentRow + 3 && c >= currentCol && c < currentCol + 3;
                                    return <div key={`${r}-${c}`} className={`w-10 h-10 flex items-center justify-center text-xs font-mono transition-colors duration-300 ${inWindow ? 'bg-blue-200 border-2 border-blue-500' : 'bg-white'}`}>{val}</div>;
                                }))}
                            </div>
                        </div>
                        <div className="text-2xl text-slate-400">âˆ—</div>
                        <div>
                            <h4 className="text-center text-sm font-bold mb-2">Kernel (High-pass)</h4>
                            <div className="grid grid-cols-3 gap-1 bg-slate-200 p-1 rounded border-2 border-purple-500">
                                {kernel.map((row, r) => row.map((val, c) => <div key={`k-${r}-${c}`} className="w-10 h-10 bg-purple-50 flex items-center justify-center text-xs font-mono font-bold text-purple-700">{val}</div>))}
                            </div>
                        </div>
                        <div className="text-2xl text-slate-400">=</div>
                        <div>
                            <h4 className="text-center text-sm font-bold mb-2">Feature Map</h4>
                            <div className="grid grid-cols-3 gap-1 bg-slate-200 p-1 rounded">
                                {Array(9).fill(0).map((_, idx) => {
                                    const isCurrent = Math.floor(idx/3) === currentRow && (idx%3) === currentCol;
                                    return <div key={`out-${idx}`} className={`w-10 h-10 flex items-center justify-center text-sm font-bold transition-all ${isCurrent ? 'bg-green-400 text-white scale-110 shadow-lg' : 'bg-slate-300 text-slate-500'}`}>{isCurrent ? sum : '?'}</div>;
                                })}
                            </div>
                        </div>
                    </div>
                    <div className="mt-6 bg-slate-50 p-4 rounded border border-slate-200 flex justify-between items-center">
                        <div className="font-mono text-xs text-slate-600">Sum = {calculationStr.join(' + ')} = <span className="text-lg font-bold text-green-600">{sum}</span></div>
                        <button onClick={() => setIsAuto(!isAuto)} className={`px-4 py-1 rounded text-sm font-bold ${isAuto ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>{isAuto ? 'åœæ­¢' : 'è‡ªå‹•æƒæ'}</button>
                    </div>
                </div>
            );
        };

        const StatisticsModule = () => {
            const truth = [10, 30, 50, 70, 90]; 
            const [preds, setPreds] = useState([20, 40, 50, 60, 80]);
            const handleSliderChange = (idx, val) => { const newPreds = [...preds]; newPreds[idx] = parseInt(val); setPreds(newPreds); };
            const getRanks = (arr) => { const sorted = [...arr].sort((a,b) => a-b); return arr.map(v => sorted.indexOf(v) + 1); };
            const rankX = getRanks(truth); const rankY = getRanks(preds);
            const n = 5; let sumD2 = 0;
            for(let i=0; i<n; i++) sumD2 += Math.pow(rankX[i] - rankY[i], 2);
            const spearman = (1 - (6 * sumD2) / (n * (n*n - 1))).toFixed(2);

            return (
                <div className="bg-white p-6 rounded-2xl shadow border border-slate-200 mt-8">
                    <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"><Icons.BarChart className="text-green-500"/> æ©Ÿç‡çµ±è¨ˆï¼šSpearman ç›¸é—œä¿‚æ•¸</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="space-y-4">
                            <h4 className="font-bold text-sm text-slate-700">èª¿æ•´é æ¸¬å€¼ (è§€å¯Ÿæ’åè®ŠåŒ–)</h4>
                            {preds.map((p, i) => (
                                <div key={i} className="flex items-center gap-4">
                                    <span className="w-16 text-xs font-bold text-slate-500">#{i+1}</span>
                                    <input type="range" min="0" max="100" value={p} onChange={(e) => handleSliderChange(i, e.target.value)} className="flex-1 accent-blue-600"/>
                                    <span className="w-8 text-sm font-mono">{p}</span>
                                </div>
                            ))}
                        </div>
                        <div className="bg-slate-50 p-6 rounded-xl flex flex-col justify-center items-center">
                            <div className="text-sm text-slate-500 mb-2">Spearman Correlation (Ï)</div>
                            <div className={`text-5xl font-bold font-mono transition-colors duration-500 ${spearman > 0.8 ? 'text-green-500' : spearman > 0.4 ? 'text-yellow-500' : 'text-red-500'}`}>{spearman}</div>
                            <div className="mt-4 w-full flex justify-between font-mono text-sm">
                                <span>çœŸæ’å: [{rankX.join(', ')}]</span><span>é æ’å: [{rankY.join(', ')}]</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const MathFoundations = () => (
            <div className="py-12 px-4 max-w-5xl mx-auto">
                <h2 className="text-3xl font-bold text-slate-800 mb-2 text-center">æ•¸å­¸èˆ‡ç†è«–åŸºç¤</h2>
                <p className="text-center text-slate-500 mb-12">é€£æ¥å¤§ä¸€æ•¸å­¸èª²ç¨‹èˆ‡äººå·¥æ™ºæ…§çš„æ ¸å¿ƒåŸç†</p>
                <LinearAlgebraModule />
                <div className="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <VisualQKV />
                    <VisualMamba />
                </div>
                <ConvolutionModule />
                <StatisticsModule />
            </div>
        );

        // --- Lab Components ---

        const PowerLoadLab = () => {
            const [temperature, setTemperature] = useState(28);
            const [timeOfDay, setTimeOfDay] = useState(12);
            const [dataPoints, setDataPoints] = useState([]);
            useEffect(() => {
                const newData = [];
                for (let t = 0; t <= 24; t++) {
                const timeFactor = -Math.cos((t - 15) * Math.PI / 12) * 50 + 100;
                const tempImpact = Math.pow(Math.max(0, temperature - 20), 1.5) * 5;
                const noise = Math.random() * 5; 
                const load = timeFactor + tempImpact + noise;
                newData.push({ time: t, load });
                }
                setDataPoints(newData);
            }, [temperature]);
            const currentLoad = dataPoints[Math.round(timeOfDay)]?.load || 0;
            return (
                <div className="bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                    <div className="flex items-center justify-between mb-6">
                    <div><h3 className="text-xl font-bold text-slate-800 flex items-center gap-2"><span className="text-yellow-500"><Icons.Zap /></span> é›»åŠ›è² è¼‰é æ¸¬</h3><p className="text-sm text-slate-500 mt-1">å›æ­¸ (Regression) å•é¡Œï¼šæ ¹æ“šæ°£æº«èˆ‡æ™‚é–“é æ¸¬é›»é‡ã€‚</p></div>
                    <div className="text-right"><div className="text-3xl font-mono font-bold text-slate-800">{currentLoad.toFixed(1)} <span className="text-base text-slate-500">MW</span></div><div className="text-xs text-green-600 font-bold">é æ¸¬è¼¸å‡º</div></div>
                    </div>
                    <div className="flex flex-col md:flex-row gap-8">
                    <div className="flex-1 h-64 bg-slate-50 rounded-lg border border-slate-200 relative overflow-hidden p-4"><svg className="w-full h-full" viewBox="0 0 240 150" preserveAspectRatio="none"><line x1="0" y1="120" x2="240" y2="120" stroke="#cbd5e1" strokeWidth="1" /><polyline fill="none" stroke="#3b82f6" strokeWidth="3" points={dataPoints.map(d => `${d.time * 10},${140 - d.load * 0.6}`).join(' ')} strokeLinecap="round" strokeLinejoin="round"/><line x1={timeOfDay * 10} y1="0" x2={timeOfDay * 10} y2="150" stroke="#ef4444" strokeWidth="2" strokeDasharray="4 2"/><circle cx={timeOfDay * 10} cy={140 - currentLoad * 0.6} r="4" fill="#ef4444" /></svg></div>
                    <div className="w-full md:w-1/3 space-y-6"><div className="bg-slate-100 p-4 rounded-xl"><label className="block text-sm font-bold text-slate-700 mb-2">æº«åº¦</label><input type="range" min="15" max="40" value={temperature} onChange={(e) => setTemperature(parseInt(e.target.value))} className="w-full accent-red-500"/><div className="flex justify-between text-xs text-slate-500 mt-1"><span>15Â°C</span><span className="font-bold text-red-500">{temperature}Â°C</span><span>40Â°C</span></div></div><div className="bg-slate-100 p-4 rounded-xl"><label className="block text-sm font-bold text-slate-700 mb-2">æ™‚é–“</label><input type="range" min="0" max="24" step="0.5" value={timeOfDay} onChange={(e) => setTimeOfDay(parseFloat(e.target.value))} className="w-full accent-blue-500"/><div className="text-center font-mono text-blue-600 mt-1">{Math.floor(timeOfDay).toString().padStart(2,'0')}:{Math.round((timeOfDay%1)*60).toString().padStart(2,'0')}</div></div></div>
                    </div>
                </div>
            );
        };

        const PowerQualityLab = () => {
            const [time, setTime] = useState(0);
            const [solar, setSolar] = useState([]);
            const [output, setOutput] = useState([]);
            const [superCapLevel, setSuperCapLevel] = useState(50); // %

            useEffect(() => {
                const interval = setInterval(() => {
                    setTime(t => t + 1);
                    
                    // Simulate Volatile Solar Input
                    const baseSolar = Math.sin(time * 0.1) * 20 + 50;
                    const noise = Math.random() * 30 - 15; // High volatility
                    const currentSolar = Math.max(0, Math.min(100, baseSolar + noise));
                    
                    // Supercapacitor Smoothing Logic (Simple AI Agent simulation)
                    // Target output is steady 50. If solar > 50, charge cap. If solar < 50, discharge.
                    let currentOutput = currentSolar;
                    let newCapLevel = superCapLevel;
                    const target = 50;

                    if (currentSolar > target) {
                        // Excess energy, charge cap
                        const excess = currentSolar - target;
                        const chargeAmount = Math.min(excess, 100 - superCapLevel); // Can't overcharge
                        newCapLevel += chargeAmount * 0.5; // Charging efficiency
                        currentOutput = currentSolar - chargeAmount;
                    } else {
                        // Deficit, discharge cap
                        const deficit = target - currentSolar;
                        const dischargeAmount = Math.min(deficit, superCapLevel); // Can't drain empty
                        newCapLevel -= dischargeAmount * 0.5; 
                        currentOutput = currentSolar + dischargeAmount;
                    }

                    setSuperCapLevel(Math.max(0, Math.min(100, newCapLevel)));
                    setSolar(prev => [...prev.slice(-40), currentOutput]); // Actually plotting output now for simplicity? No let's plot inputs
                    // Let's store objects
                    setOutput(prev => [...prev.slice(-40), { solar: currentSolar, smoothed: currentOutput }]);

                }, 200);
                return () => clearInterval(interval);
            }, [time, superCapLevel]);

            return (
                <div className="bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                    <div className="flex justify-between items-start mb-6">
                        <div>
                            <h3 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                                <Icons.Zap className="text-yellow-500"/> é›»åŠ›å“è³ªé æ¸¬èˆ‡æ§åˆ¶
                            </h3>
                            <p className="text-sm text-slate-500 mt-1">
                                å¯¦é©—å®¤è¨­å‚™ï¼šå¤ªé™½èƒ½æ¿é™£åˆ— + 1F è¶…ç´šé›»å®¹ã€‚AI ä»»å‹™ï¼šé æ¸¬ç™¼é›»æ³¢å‹•ä¸¦æ§åˆ¶å……æ”¾é›»ï¼Œå¹³æ»‘é›»ç¶²è² è¼‰ã€‚
                            </p>
                        </div>
                        <div className="text-right">
                            <div className="flex items-center gap-2 justify-end">
                                <Icons.Battery className={superCapLevel < 20 ? "text-red-500" : "text-green-500"} />
                                <span className="font-mono font-bold">{superCapLevel.toFixed(1)}%</span>
                            </div>
                            <div className="text-xs text-slate-400">SuperCap Level</div>
                        </div>
                    </div>

                    <div className="h-48 bg-slate-900 rounded-lg relative overflow-hidden p-4 border border-slate-700">
                        <div className="flex h-full items-end gap-1">
                            {output.map((d, i) => (
                                <div key={i} className="flex-1 flex flex-col justify-end h-full gap-0.5">
                                    {/* Solar (Yellow) */}
                                    <div 
                                        className="bg-yellow-500/50 w-full rounded-t-sm transition-all duration-300" 
                                        style={{ height: `${d.solar}%` }}
                                    ></div>
                                    {/* Smoothed (Green Line overlay - simplified to bar here for visual) */}
                                    <div 
                                        className="bg-green-400 w-full h-1 absolute"
                                        style={{ bottom: `${d.smoothed}%` }}
                                    ></div>
                                </div>
                            ))}
                        </div>
                        {/* Legend */}
                        <div className="absolute top-2 left-2 text-[10px] text-slate-400 flex flex-col gap-1">
                            <span className="flex items-center gap-1"><div className="w-2 h-2 bg-yellow-500/50"></div> Solar Input (Volatile)</span>
                            <span className="flex items-center gap-1"><div className="w-2 h-1 bg-green-400"></div> Grid Output (Stabilized)</span>
                        </div>
                    </div>
                </div>
            );
        };

        const EmotionLab = () => {
            const [modality, setModality] = useState('text');
            const [valence, setValence] = useState(0.8);
            const [arousal, setArousal] = useState(0.2);
            
            // Soft Label Logic
            // Map V-A to 3 classes: Negative (Left), Neutral (Center), Positive (Right)
            // Simplified distance-based soft label
            const distNeg = Math.sqrt(Math.pow(valence - (-0.8), 2) + Math.pow(arousal - 0, 2));
            const distNeu = Math.sqrt(Math.pow(valence - 0, 2) + Math.pow(arousal - 0, 2));
            const distPos = Math.sqrt(Math.pow(valence - 0.8, 2) + Math.pow(arousal - 0, 2));
            
            // Invert distance to get similarity
            const rawScores = [1/(distNeg+0.1), 1/(distNeu+0.1), 1/(distPos+0.1)];
            const sum = rawScores.reduce((a,b)=>a+b, 0);
            const normLabel = rawScores.map(v => (v/sum).toFixed(2));

            const diagMatrix = [
                [normLabel[0], 0, 0],
                [0, normLabel[1], 0],
                [0, 0, normLabel[2]]
            ];

            // Determine emotion text
            let emotionText = "Neutral";
            if (arousal > 0.3) {
                if (valence > 0.3) emotionText = "èˆˆå¥®/å¿«æ¨‚ (Excited/Happy)";
                else if (valence < -0.3) emotionText = "æ†¤æ€’/å£“åŠ› (Angry/Stressed)";
                else emotionText = "é©šè¨/è­¦è¦º (Surprised/Alert)";
            } else if (arousal < -0.3) {
                if (valence > 0.3) emotionText = "æ”¾é¬†/å¹³éœ (Relaxed/Calm)";
                else if (valence < -0.3) emotionText = "æ†‚é¬±/æ‚²å‚· (Depressed/Sad)";
                else emotionText = "ç–²å€¦/æƒ³ç¡ (Tired/Sleepy)";
            } else {
                if (valence > 0.3) emotionText = "æ»¿æ„ (Content)";
                else if (valence < -0.3) emotionText = "ä¸æ»¿ (Displeased)";
            }

            return (
                <div className="bg-white p-6 rounded-2xl shadow-lg border border-slate-200 mt-8">
                    <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <Icons.Heart className="text-pink-500"/> å¤šæ¨¡æ…‹æƒ…æ„Ÿè¾¨è­˜ (Multimodal Emotion)
                    </h3>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        {/* V-A Space Control */}
                        <div className="space-y-4">
                            <div className="flex gap-2 mb-4">
                                {['Text', 'Audio', 'ECG'].map(m => (
                                    <button 
                                        key={m} 
                                        onClick={() => setModality(m.toLowerCase())}
                                        className={`px-3 py-1 rounded text-xs font-bold border ${modality===m.toLowerCase() ? 'bg-pink-100 border-pink-400 text-pink-600' : 'bg-slate-50 border-slate-200'}`}
                                    >
                                        {m}
                                    </button>
                                ))}
                            </div>
                            
                            <div className="relative w-full aspect-square bg-slate-50 border-2 border-slate-200 rounded-lg overflow-hidden">
                                {/* Quadrant Backgrounds */}
                                <div className="absolute inset-0 grid grid-cols-2 grid-rows-2 opacity-10 pointer-events-none">
                                    <div className="bg-red-500"></div>   {/* Top Left: Distress/Angry */}
                                    <div className="bg-yellow-500"></div> {/* Top Right: Joy/Excited */}
                                    <div className="bg-blue-500"></div>   {/* Bottom Left: Depression/Sad */}
                                    <div className="bg-green-500"></div>  {/* Bottom Right: Serenity/Relaxed */}
                                </div>

                                {/* Axes */}
                                <div className="absolute top-1/2 left-0 w-full h-0.5 bg-slate-400"></div>
                                <div className="absolute left-1/2 top-0 w-0.5 h-full bg-slate-400"></div>
                                
                                {/* Labels */}
                                <div className="absolute top-2 left-1/2 -translate-x-1/2 text-[10px] font-bold text-slate-600 bg-white/50 px-1 rounded">High Arousal (æ¿€å‹•)</div>
                                <div className="absolute bottom-2 left-1/2 -translate-x-1/2 text-[10px] font-bold text-slate-600 bg-white/50 px-1 rounded">Low Arousal (å¹³éœ)</div>
                                <div className="absolute left-2 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-600 bg-white/50 px-1 rounded">Negative Valence (è² é¢)</div>
                                <div className="absolute right-2 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-600 bg-white/50 px-1 rounded">Positive Valence (æ­£é¢)</div>

                                {/* Quadrant Labels */}
                                <div className="absolute top-1/4 left-1/4 -translate-x-1/2 -translate-y-1/2 text-[12px] font-bold text-red-800/30">æ†¤æ€’/å£“åŠ›</div>
                                <div className="absolute top-1/4 right-1/4 translate-x-1/2 -translate-y-1/2 text-[12px] font-bold text-yellow-800/30">å¿«æ¨‚/èˆˆå¥®</div>
                                <div className="absolute bottom-1/4 left-1/4 -translate-x-1/2 translate-y-1/2 text-[12px] font-bold text-blue-800/30">æ†‚é¬±/æ‚²å‚·</div>
                                <div className="absolute bottom-1/4 right-1/4 translate-x-1/2 translate-y-1/2 text-[12px] font-bold text-green-800/30">æ”¾é¬†/å¹³éœ</div>

                                {/* Cursor Area */}
                                <div 
                                    className="absolute w-full h-full cursor-crosshair"
                                    onClick={(e) => {
                                        const rect = e.currentTarget.getBoundingClientRect();
                                        const x = (e.clientX - rect.left) / rect.width; 
                                        const y = (e.clientY - rect.top) / rect.height; 
                                        setValence((x * 2 - 1)); // 0..1 -> -1..1
                                        setArousal(-(y * 2 - 1)); // 0..1 -> 1..-1 (inverted Y)
                                    }}
                                >
                                    {/* Point */}
                                    <div 
                                        className="absolute w-4 h-4 bg-slate-900 rounded-full border-2 border-white shadow-lg transition-all duration-200 pointer-events-none"
                                        style={{ 
                                            left: `${(valence + 1) / 2 * 100}%`, 
                                            top: `${(-arousal + 1) / 2 * 100}%`, // arousal is Y (up is positive), so map 1->0%, -1->100%
                                            transform: 'translate(-50%, -50%)'
                                        }}
                                    ></div>
                                </div>
                            </div>
                            <div className="flex justify-between items-center text-xs font-mono text-slate-500 bg-slate-100 p-2 rounded">
                                <div>
                                    <div>Valence (X): <span className="font-bold text-slate-700">{valence.toFixed(2)}</span></div>
                                    <div>Arousal (Y): <span className="font-bold text-slate-700">{arousal.toFixed(2)}</span></div>
                                </div>
                                <div className="text-right font-bold text-pink-600 border-l border-slate-300 pl-4">
                                    {emotionText}
                                </div>
                            </div>
                        </div>

                        {/* Matrices Display */}
                        <div className="flex flex-col justify-center space-y-6">
                            <div className="bg-slate-900 p-4 rounded-lg font-mono text-xs text-green-400 shadow-lg">
                                <div className="text-slate-400 mb-2 border-b border-slate-700 pb-2">// Soft Label Vector (Neg, Neu, Pos)</div>
                                <div className="flex gap-2 justify-between mt-2">
                                    <div className="flex flex-col items-center">
                                        <div className="h-16 w-4 bg-slate-800 rounded-full relative overflow-hidden">
                                            <div className="absolute bottom-0 w-full bg-red-500 transition-all duration-300" style={{height: `${normLabel[0]*100}%`}}></div>
                                        </div>
                                        <span className="mt-1">{normLabel[0]}</span>
                                        <span className="text-[10px] text-slate-500">Neg</span>
                                    </div>
                                    <div className="flex flex-col items-center">
                                        <div className="h-16 w-4 bg-slate-800 rounded-full relative overflow-hidden">
                                            <div className="absolute bottom-0 w-full bg-slate-400 transition-all duration-300" style={{height: `${normLabel[1]*100}%`}}></div>
                                        </div>
                                        <span className="mt-1">{normLabel[1]}</span>
                                        <span className="text-[10px] text-slate-500">Neu</span>
                                    </div>
                                    <div className="flex flex-col items-center">
                                        <div className="h-16 w-4 bg-slate-800 rounded-full relative overflow-hidden">
                                            <div className="absolute bottom-0 w-full bg-green-500 transition-all duration-300" style={{height: `${normLabel[2]*100}%`}}></div>
                                        </div>
                                        <span className="mt-1">{normLabel[2]}</span>
                                        <span className="text-[10px] text-slate-500">Pos</span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-slate-900 p-4 rounded-lg font-mono text-xs shadow-lg">
                                <div className="text-slate-400 mb-2 border-b border-slate-700 pb-2">// Diagonal Matrix (Training Target)</div>
                                {diagMatrix.map((row, i) => (
                                    <div key={i} className="flex justify-between w-48 mx-auto py-1">
                                        {row.map((val, j) => (
                                            <span key={j} className={val > 0 ? "text-pink-400 font-bold scale-110 transition-transform" : "text-slate-700"}>
                                                {val > 0 ? val : '0.00'}
                                            </span>
                                        ))}
                                    </div>
                                ))}
                            </div>
                            <div className="text-[10px] text-slate-500 leading-relaxed">
                                <span className="text-pink-500 font-bold">* å¯¦é©—èªªæ˜ï¼š</span>å°‡ {modality} ç‰¹å¾µè¼¸å…¥æ¨¡å‹ï¼Œç›®æ¨™æ˜¯é æ¸¬æ­¤å°è§’çŸ©é™£ã€‚æ­¤çŸ©é™£åæ˜ äº†æƒ…ç·’åœ¨ V-A ç©ºé–“ä¸­çš„æ¨¡ç³Šåˆ†ä½ˆ (Soft Label)ï¼Œæ¯”å–®ä¸€åˆ†é¡æ›´æº–ç¢ºã€‚
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const LabSection = () => (
            <div className="py-12 px-4 max-w-6xl mx-auto space-y-12">
                <h2 className="text-3xl font-bold text-slate-800 text-center mb-8">äººå·¥æ™ºæ…§æ‡‰ç”¨å¯¦é©—å®¤</h2>
                <PowerLoadLab />
                <PowerQualityLab />
                <EmotionLab />
            </div>
        );

        const Navigation = ({ activeTab, setActiveTab }) => {
            const tabs = [
                { id: 'home', label: 'é¦–é ', Icon: Icons.Brain },
                { id: 'concepts', label: 'æ ¸å¿ƒè§€å¿µ', Icon: Icons.Layers }, 
                { id: 'math', label: 'æ•¸å­¸åŸºç¤', Icon: Icons.Function },
                { id: 'data', label: 'æ•¸æ“šå‰è™•ç†', Icon: Icons.Code }, 
                { id: 'lab', label: 'äººå·¥æ™ºæ…§æ‡‰ç”¨å¯¦é©—å®¤', Icon: Icons.Zap },
                { id: 'quiz', label: 'æŒ‘æˆ°', Icon: Icons.CheckCircle },
            ];

            return (
                <nav className="bg-slate-900 text-white shadow-lg sticky top-0 z-50 border-b border-blue-900/50">
                    <div className="max-w-7xl mx-auto px-4">
                        <div className="flex justify-between items-center h-16">
                            <div className="flex items-center space-x-2 font-bold text-xl text-blue-400">
                                <Icons.Zap />
                                <span className="bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400">EE x AI 2026</span>
                            </div>
                            <div className="hidden md:flex space-x-1">
                                {tabs.map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-all duration-300 ${
                                            activeTab === tab.id
                                                ? 'bg-blue-600/90 text-white shadow-[0_0_15px_rgba(37,99,235,0.5)]'
                                                : 'text-slate-300 hover:bg-slate-800 hover:text-blue-300'
                                        }`}
                                    >
                                        <tab.Icon />
                                        <span>{tab.label}</span>
                                    </button>
                                ))}
                            </div>
                             <div className="md:hidden text-sm text-gray-400">(è«‹ä½¿ç”¨å¯¬è¢å¹•ç€è¦½)</div>
                        </div>
                    </div>
                </nav>
            );
        };

        const Hero = ({ onStart }) => (
            <div className="bg-gradient-to-br from-slate-950 via-slate-900 to-blue-950 min-h-[calc(100vh-64px)] flex items-center justify-center text-white px-4 relative overflow-hidden">
                 <div className="absolute inset-0 bg-[linear-gradient(rgba(30,41,59,0.3)_1px,transparent_1px),linear-gradient(90deg,rgba(30,41,59,0.3)_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_60%_60%_at_50%_50%,#000_70%,transparent_100%)]"></div>
                 <div className="max-w-4xl text-center space-y-8 relative z-10">
                    <div className="inline-flex items-center justify-center p-4 rounded-full bg-blue-500/10 border border-blue-400/30 mb-4 shadow-[0_0_30px_rgba(59,130,246,0.3)]">
                        <Icons.Cpu />
                    </div>
                    <h1 className="text-5xl md:text-7xl font-extrabold tracking-tight leading-tight">
                        é›»æ©Ÿç³»æ–°ç”Ÿçš„ <br />
                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400">AI æ¢ç´¢ä¹‹æ—…</span>
                    </h1>
                    <p className="text-xl md:text-2xl text-slate-300 max-w-2xl mx-auto leading-relaxed">
                        å¾<strong>ç·šæ€§ä»£æ•¸</strong>åˆ°<strong>LoRA å¾®èª¿</strong>ã€‚<br/>
                        é€£çµå¤§ä¸€æ•¸å­¸åŸºç¤ï¼Œæ¢ç´¢ Python å¯¦ç¾é›»åŠ›é æ¸¬èˆ‡ LLM æŠ€è¡“ã€‚
                    </p>
                    <div className="flex justify-center gap-4 pt-8">
                        <button onClick={onStart} className="group bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-full font-bold text-lg transition-all hover:scale-105 shadow-[0_0_20px_rgba(37,99,235,0.5)] flex items-center">
                            é–‹å§‹æ¢ç´¢ <span className="ml-2 group-hover:translate-x-1 transition-transform"><Icons.ChevronRight/></span>
                        </button>
                    </div>
                </div>
            </div>
        );

        const Quiz = () => {
            const [currentQuestion, setCurrentQuestion] = useState(0); const [score, setScore] = useState(0); const [showScore, setShowScore] = useState(false); const [selectedAnswer, setSelectedAnswer] = useState(null);
            const questions = [{ question: "Mamba æ¨¡å‹ä½¿ç”¨ä»€éº¼æ“ä½œä¾†å¯¦ç¾å¹³è¡Œè¨ˆç®—ï¼Ÿ", options: ["Backpropagation", "Parallel Scan", "Convolution", "Max Pooling"], correct: 1 }, { question: "åœ¨é›»åŠ›å¯¦é©—ä¸­ï¼Œè¶…ç´šé›»å®¹çš„ä¸»è¦ç”¨é€”æ˜¯ä»€éº¼ï¼Ÿ", options: ["ç™¼é›»", "å¹³æ»‘åŠŸç‡æ³¢å‹•", "å¢åŠ é›»å£“", "é™æº«"], correct: 1 }, { question: "Transformer ä¸­çš„ Attention æ©Ÿåˆ¶è¨ˆç®—å…¬å¼åŒ…å«å“ªå€‹çŸ©é™£ä¹˜æ³•ï¼Ÿ", options: ["Q * K^T", "Q * V", "K * V", "W * X"], correct: 0 }];
            const handleAnswer = (index) => { setSelectedAnswer(index); if (index === questions[currentQuestion].correct) setScore(score + 1); setTimeout(() => { if (currentQuestion < questions.length - 1) { setCurrentQuestion(currentQuestion + 1); setSelectedAnswer(null); } else setShowScore(true); }, 1000); };
            const resetQuiz = () => { setCurrentQuestion(0); setScore(0); setShowScore(false); setSelectedAnswer(null); };
            return (
                <div className="py-12 px-4 max-w-3xl mx-auto">
                <h2 className="text-3xl font-bold text-slate-800 mb-8 text-center">è§€å¿µé©—æ”¶</h2>
                <div className="bg-white p-8 rounded-2xl shadow-lg border border-slate-100">
                    {showScore ? <div className="text-center"><h3 className="text-2xl font-bold mb-4">å¾—åˆ†: {score}</h3><button onClick={resetQuiz} className="bg-blue-600 text-white px-6 py-2 rounded-full">é‡ä¾†</button></div> : <div><h3 className="text-xl font-bold mb-6">{questions[currentQuestion].question}</h3><div className="space-y-3">{questions[currentQuestion].options.map((opt, i) => <button key={i} onClick={() => handleAnswer(i)} disabled={selectedAnswer!==null} className={`w-full text-left p-4 rounded-xl border ${selectedAnswer===i ? (i===questions[currentQuestion].correct ? 'bg-green-100 border-green-500' : 'bg-red-100 border-red-500') : 'hover:bg-slate-50'}`}>{opt}</button>)}</div></div>}
                </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('home');

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col">
                <Navigation activeTab={activeTab} setActiveTab={setActiveTab} />
                <main className="flex-grow">
                    {activeTab === 'home' && <Hero onStart={() => setActiveTab('concepts')} />}
                    {activeTab === 'concepts' && <Concepts2 />}
                    {activeTab === 'math' && <MathFoundations />}
                    {activeTab === 'data' && <DataProjects />}
                    {activeTab === 'lab' && <LabSection />}
                    {activeTab === 'quiz' && <Quiz />}
                </main>
                <footer className="bg-slate-900 text-slate-400 py-8 text-center mt-auto border-t border-slate-800">
                    <p className="text-sm font-medium mb-2">Designed for EE Freshmen</p>
                    <p className="text-xs opacity-60">Â© 2026 AI Explorer for Electrical Engineers. All rights reserved.</p>
                </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>